
# ----------------------------------------------
# Test name: 	SN220_SPC
# Description:	run SPC
# Revision:		1.00
# Date:			20/09/2021
# Tool rev:		1 or later
# ----------------------------------------------

 
version
interval 20
reset 1

// NCI CORE RESET CMD
send 20000100
receive

// NCI CORE INIT CMD
send 2001020000

// NCI CORE SETCONFIG CMD:
send 20020401850101

// NCI SYSTEM ENABLE PROPRIETARY CMD
send 2F0200

//#Set Power mode to Idle
//send 2F000100
 
//#RF_CLOCKSetting
//send 20030301A011

// Set Clock (if clock-less --> "0180")
send 20020B01A0110703803201C80000
//send 20020B01A0110701803201C80000

//#Read Customer Phase before SPC
send 20030301A017

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
//SPC CMD for CALIBRATION
//SET SPC FIRST STEP --> SPC CALIBRATION for 19.2MHz
//send 2F3D223000282F000351000000000200000A14000000000000000000000000000000000000

//SET SPC FIRST STEP --> SPC CALIBRATION for 24MHz
//send 2F3D223000D92ED00255000000000200000A14000000000000000000000000000000000000

//SET SPC FIRST STEP --> SPC CALIBRATION for 26MHz
send 2F3D223000322F0C0351000000000200000A14000000000000000000000000000000000000

//SET SPC FIRST STEP --> SPC CALIBRATION for 27.12MHz
//send 2F3D223000032F3D043B000000000200000A14000000000000000000000000000000000000

//SET SPC FIRST STEP --> SPC CALIBRATION for 32MHz
//send 2F3D223000A92E200351000000000200000A14000000000000000000000000000000000000

//SET SPC FIRST STEP --> SPC CALIBRATION for 38.4MHz
//send 2F3D223000C82E000351000000000200000A14000000000000000000000000000000000000

//SET SPC FIRST STEP --> SPC CALIBRATION for 48MHz
//send 2F3D2230008D2FD00251000000000200000A14000000000000000000000000000000000000

//SET SPC FIRST STEP --> SPC CALIBRATION for HFO (22.5MHz)
//send 2F3D223000FE2E840351000000000206000A14140014000000000000000000000000000000

//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


//COPY SPC CMD BLKO (2F3D223000XXXXX) according to the Input Clock used HERE (from SPC Excel file)
send 2F3D2230008D2FD002513E102CB60200000A14000000000000000000000000000000000000


//SPC CMD [PLL sweep] input clock 19.2MHz
//#Set SPC configuration Block1
//send 2F3D7E3001C08C0366C08C0266C08C0166C08C0066008D0466008D0366008D0266008D0166008D0066408D0466408D0366408D0266408D0166408D0066808D0466808D0366808D0266808D0166808D0066C08D0466C08D0366C08D0266C08D0166C08D0066008E0466008E0366008E0266008E0166008E0066408E0466408E0366
//sleep 100
//#Set SPC configuration Block2
//send 2F3D7E3002408E0266408E0166408E0066808E0466808E0366808E0266808E0166808E0066C08E0466C08E0366C08E0266C08E0166C08E0066008F0466008F0366008F0266008F0166008F0066408F0466408F0366408F0266408F0166408F0066808F0466808F0366808F0266808F0166808F0066C08F0466C08F0366C08F0266
//sleep 100
//#Set SPC configuration Block3
//send 2F3D4E3003C08F0166C08F0066009004660090036600900266009001660090006640900466409003664090026640900166409000668090046680900366809002668090016680900066C0900466C0900366
//sleep 100


//SPC CMD [PLL sweep] input clock HFO (22.5MHz)
//#Set SPC configuration Block1
//send 2F3D7E300102AB047202AB007242AB017282AB0272C2AB037202AC047202AC007242AC017282AC0272C2AC037202AD047202AD007242AD017282AD0272C2AD037202AE047202AE007242AE017282AE0272C2AE037202AF047202AF007242AF017282AF0272C2AF037202B0047202B0007242B0017282B00272C2B0037202B10472
//sleep 100
//#Set SPC configuration Block2
//send 2F3D7E300202B1007242B1017282B10272C2B1037202B2047202B2007242B2017282B20272C2B2037202B3047202B3007242B3017282B30272C2B3037202B4047202B4007242B4017282B40272C2B4037202B5047202B5007242B5017282B50272C2B5037202B6047202B6007242B6017282B60272C2B6037202B7047202B70072
//sleep 100
//#Set SPC configuration Block3
//send 2F3D4E300342B7017282B70272C2B7037202B8047202B8007242B8017282B80272C2B8037202B9047202B9007242B9017282B90272C2B9037202BA047202BA007242BA017282BA0272C2BA037202BB0472
//sleep 100

 
//SPC CMD [PLL sweep] input clock 24MHz
//#Set SPC configuration Block1
//send 2F3D7E300102A8006242A8026282A8046282A80162C2A80362C2A8006202A9026242A9046242A9016282A9036282A90062C2A9026202AA046202AA016242AA036242AA006282AA0262C2AA0462C2AA016202AB036202AB006242AB026282AB046282AB0162C2AB0362C2AB006202AC026242AC046242AC016282AC036282AC0062
//sleep 100
//#Set SPC configuration Block2
//send 2F3D7E3002C2AC026202AD046202AD016242AD036242AD006282AD0262C2AD0462C2AD016202AE036202AE006242AE026282AE046282AE0162C2AE0362C2AE006202AF026242AF046242AF016282AF036282AF0062C2AF026202B0046202B0016242B0036242B0006282B00262C2B00462C2B0016202B1036202B1006242B10262
//sleep 100
//#Set SPC configuration Block3
//send 2F3D4E300382B1046282B10162C2B10362C2B1006202B2026242B2046242B2016282B2036282B20062C2B2026202B3046202B3016242B3036242B3006282B30262C2B30462C2B3016202B4036202B40062
//sleep 100


//SPC CMD [PLL sweep] input clock 26MHz
//#Set SPC configuration Block1
send 2F3D7E300142A5016282A5036282A50062C2A5026202A6046202A6016242A6036242A6006282A60262C2A60462C2A6016202A7036202A7006242A7026282A7046282A70162C2A70362C2A7006202A8026242A8046242A8016282A8036282A80062C2A8026202A9046202A9016242A9036242A9006282A90262C2A90462C2A90162
//sleep 100
//#Set SPC configuration Block2
send 2F3D7E300202AA036202AA006242AA026282AA046282AA0162C2AA0362C2AA006202AB026242AB046242AB016282AB036282AB0062C2AB026202AC046202AC016242AC036242AC006282AC0262C2AC0462C2AC016202AD036202AD006242AD026282AD046282AD0162C2AD0362C2AD006202AE026242AE046242AE016282AE0362
//sleep 100
//#Set SPC configuration Block3
send 2F3D4E300382AE0062C2AE026202AF046202AF016242AF036242AF006282AF0262C2AF0462C2AF016202B0036202B0006242B0026282B0046282B00162C2B00362C2B0006202B1026242B1046242B10162
//sleep 100
 
 
//SPC CMD [PLL sweep] input clock 27.12MHz
//#Set SPC configuration Block1
//send 2F3D7E300100890266008901660089006640890466408903664089026640890166408900668089046680890366808902668089016680890066C0890466C0890366C0890266C0890166C0890066008A0466008A0366008A0266008A0166008A0066408A0466408A0366408A0266408A0166408A0066808A0466808A0366808A0266
//sleep 100
//#Set SPC configuration Block2
//send 2F3D7E3002808A0166808A0066C08A0466C08A0366C08A0266C08A0166C08A0066008B0466008B0366008B0266008B0166008B0066408B0466408B0366408B0266408B0166408B0066808B0466808B0366808B0266808B0166808B0066C08B0466C08B0366C08B0266C08B0166C08B0066008C0466008C0366008C0266008C0166
//sleep 100
//#Set SPC configuration Block3
//send 2F3D4E3003008C0066408C0466408C0366408C0266408C0166408C0066808C0466808C0366808C0266808C0166808C0066C08C0466C08C0366C08C0266C08C0166C08C0066008D0466008D0366008D0366
//sleep 100
 
 
//SPC CMD [PLL sweep] input clock 32MHz
//#Set SPC configuration Block1
//send 2F3D7E3001C3BB006203BC006243BC006283BC0062C3BC006203BD006243BD006283BD0062C3BD006203BE006243BE006283BE0062C3BE006203BF006243BF006283BF0062C3BF006203C0006243C0006283C00062C3C0006203C1006243C1006283C10062C3C1006203C2006243C2006283C20062C3C2006203C3006243C30062
//sleep 100
//#Set SPC configuration Block2
//send 2F3D7E300283C30062C3C3006203C4006243C4006283C40062C3C4006203C5006243C5006283C50062C3C5006203C6006243C6006283C60062C3C6006203C7006243C7006283C70062C3C7006203C8006243C8006283C80062C3C8006203C9006243C9006283C90062C3C9006203CA006243CA006283CA0062C3CA006203CB0062
//sleep 100
//#Set SPC configuration Block3
//send 2F3D4E300343CB006283CB0062C3CB006203CC006243CC006283CC0062C3CC006203CD006243CD006283CD0062C3CD006203CE006243CE006283CE0062C3CE006203CF006243CF006283CF0062C3CF0062
//sleep 100


//SPC CMD [PLL sweep] input clock 38.4MHz
//#Set SPC configuration Block1
//send 2F3D7E3001818C0066C18C0466C18C0366C18C0266C18C0166C18C0066018D0466018D0366018D0266018D0166018D0066418D0466418D0366418D0266418D0166418D0066818D0466818D0366818D0266818D0166818D0066C18D0466C18D0366C18D0266C18D0166C18D0066018E0466018E0366018E0266018E0166018E0066
//sleep 100
//#Set SPC configuration Block2
//send 2F3D7E3002418E0466418E0366418E0266418E0166418E0066818E0466818E0366818E0266818E0166818E0066C18E0466C18E0366C18E0266C18E0166C18E0066018F0466018F0366018F0266018F0166018F0066418F0466418F0366418F0266418F0166418F0066818F0466818F0366818F0266818F0166818F0066C18F0466
//sleep 100
//#Set SPC configuration Block3
//send 2F3D4E3003C18F0366C18F0266C18F0166C18F0066019004660190036601900266019001660190006641900466419003664190026641900166419000668190046681900366819002668190016681900066
//sleep 100


//SPC CMD [PLL sweep] input clock 48MHz
//#Set SPC configuration Block1
//send 2F3D7E3001C3A80362C3A8006203A9026243A9046243A9016283A9036283A90062C3A9026203AA046203AA016243AA036243AA006283AA0262C3AA0462C3AA016203AB036203AB006243AB026283AB046283AB0162C3AB0362C3AB006203AC026243AC046243AC016283AC036283AC0062C3AC026203AD046203AD016243AD0362
//sleep 100
//#Set SPC configuration Block2
//send 2F3D7E300243AD006283AD0262C3AD0462C3AD016203AE036203AE006243AE026283AE046283AE0162C3AE0362C3AE006203AF026243AF046243AF016283AF036283AF0062C3AF026203B0046203B0016243B0036243B0006283B00262C3B00462C3B0016203B1036203B1006243B1026283B1046283B10162C3B10362C3B10062
//sleep 100
//#Set SPC configuration Block3
//send 2F3D4E300303B2026243B2046243B2016283B2036283B20062C3B2026203B3046203B3016243B3036243B3006283B30262C3B30462C3B3016203B4036203B4006243B4026283B4046283B40162C3B40362
//sleep 100


//#Start SPC Algorithm
send 2F3D0131
trigger 6F3D07

//#Read Customer Phase after SPC
send 20030301A017
receive 

